# Руководство пользователя

## Описание проекта
**Приложения для учёта заработной платы локомотивных бригад** — это учебный проект, предназначенный для управления сотрудниками локомотивных бригад и учёта зарплаты в железнодорожной компании. Приложение позволяет управлять данными сотрудников, рейсов, состава бригад, календаря смен и расчёта выплат.

### Возможности
- Авторизация пользователей с определением роли (Администратор, HR, Бухгалтер, Сотрудник) и сохранением последнего логина и пароля;
- Добавление, изменение, копирование и удаление данных в справочниках: «Сотрудники», «Должности», «Рейсы», «Состав бригады», «Календарь смен», «Учёт зарплаты»;
- Поиск записей для каждого из справочников;
- Ограничение доступа в зависимости от роли пользователя.


## Установка и запуск
### Системные требования

#### Аппаратные требования для сервера
| Наименование компонента | Минимальные        | Рекомендуемые      |
|-------------------------|--------------------|--------------------|
| ОЗУ                     | 4 ГБ               | 8 ГБ               |
| Жесткий диск            | 100 ГБ             | 500 ГБ             |
| Видеоадаптер            | Nvidia/AMD/Intel   | Nvidia/AMD/Intel   |

#### Аппаратные требования для клиента
| Наименование компонента | Минимальные        | Рекомендуемые      |
|-------------------------|--------------------|--------------------|
| ОЗУ                     | 4 ГБ               | 16 ГБ              |
| Жесткий диск            | 50 ГБ              | 100 ГБ             |

#### Программные требования
| Наименование            | Описание           |
|-------------------------|--------------------|
| Операционная система    | Windows 10 и выше  |
| СУБД                    | PostgreSQL 17      |

### Установка
1. **Установите PostgreSQL**:
   - Скачайте и установите PostgreSQL с официального сайта: https://www.postgresql.org/download/;
   - Укажите пароль для пользователя `postgres` (рекомендуется `root`);
   - Оставьте порт по умолчанию `5432`.

2. **Восстановите базу данных**:
   - Откройте командную строку (`cmd`):  
        ```bash  
        createdb -U postgres -h localhost -p 5432 -E UTF8 "SalaryAccounting"  
        ```
   - Введите пароль `root`.
   - Восстановите базу из дампа:
        ```bash 
        psql -U postgres -h localhost -p 5432 -d "SalaryAccounting" -f "src\\data\\salary_accounting_dump.sql"
        ```
   - Введите пароль `root`.

3. **Запустите приложение**:
- Дважды щёлкните по файлу `SalaryManager.exe` (автономный исполняемый файл, установка не требуется).

### Проверка работоспособности
Запустите `SalaryManager.exe`. Если база данных настроена корректно, откроется окно авторизации. Параметры подключения к базе должны быть:
- DB_NAME = "SalaryAccounting"
- DB_USER = "postgres"
- DB_PASSWORD = "root"
- DB_HOST = "localhost"
- DB_PORT = "5432"

![Окно авторизации](screenshots\Auth_window.png)


## Использование

### Роли пользователей
Приложение поддерживает четыре роли пользователей (тестовые логины и пароли хранятся в `login.txt`):
- **Администратор**: полный доступ ко всем вкладкам и функциям;

- **HR**: доступ с редактированием к вкладкам «Сотрудники», «Должности», «Состав бригады», «Календарь смен»;

- **Бухгалтер**: доступ с редактированием к «Учёт зарплаты» и только просмотр для «Сотрудники»;
![Вкладка «Сотрудники» для бухгалтера](screenshots\Employees_tab_accountant.png)

- **Сотрудник**: просмотр «Календарь смен» (графический вид) и «Учёт зарплаты» (без редактирования);
![Календарь смен для сотрудника](screenshots\Shift_calendar.png)
![Учёт зарплаты для сотрудника](screenshots\Salary_tab_employee.png)


### Главное окно
После авторизации открывается главное окно с боковой панелью, где отображаются доступные вкладки в зависимости от роли пользователя.
![Главное окно](screenshots\Main_window.png)

### Работа со справочниками
Все справочники имеют схожий интерфейс для добавления, изменения и удаления записей:
- **Добавление**: Заполните все поля и нажмите «Добавить».
- **Изменение**: Выберите строку, нажмите «Изменить», обновите данные и нажмите «Сохранить».
- **Удаление**: Выберите строку и нажмите «Удалить» (убедитесь, что запись не связана с другими).
- **Поиск**: Введите текст в поле поиска и нажмите Enter или иконку поиска. Для сброса нажмите крестик.
- **Копирование**: Выберите строку и нажмите «Копировать» для копирования в буфер обмена.

#### Справочник «Сотрудники»
1. Хранит данные: ФИО, пол, дата рождения, должность, почта;
2. Доступ: Администратор, HR, Бухгалтер (просмотр).

![Справочник «Сотрудники»](screenshots\Employees_tab.png)

#### Справочник «Должности»
1. Хранит данные: название должности, ставка за час;
2. Доступ: Администратор, HR.

![Справочник «Должности»](screenshots\Position_tab.png)

#### Справочник «Рейсы»
1. Хранит данные: название рейса, продолжительность (заполняется автоматически), дата отправления, дата прибытия, время отправления, время прибытия;
2. Доступ: Администратор.

![Справочник «Рейсы»](screenshots\Trips_tab.png)

#### Справочник «Состав бригады»
1. Хранит данные: ID бригады, ФИО сотрудника, название рейса, название бригады, дата формирования;
2. Доступ: Администратор, HR.

![Справочник «Состав бригады»](screenshots\Brigade_composition_tab.png)

#### Справочник «Календарь смен»
1. Хранит данные: ID бригады, даты начала, дата окончания, ID рейса;
2. Доступ: Администратор, HR.

![Справочник «Календарь смен»](screenshots\Shift_calendar_tab.png)

#### Календарь смен (для роли «Сотрудник»)
1. Для сотрудников календарь отображается графически в виде плитки: дни со сменами подсвечиваются, при клике показываются детали (путь следования, начало смены, конец смены, продолжительность, название бригады);
2. Доступ: Сотрудник.

![Календарь смен графический](screenshots\Shift_calendar.png)

#### Справочник «Учёт зарплаты»
1. Хранит данные: ФИО сотрудника, сумма, дата выплаты. 
2. Доступ: Администратор, Бухгалтер, Сотрудник (просмотр своих данных).

![Справочник «Учёт зарплаты»](screenshots\Payroll_tab.png)


## Устранение неполадок
| Текст сообщения                | Описание                                    | Дальнейшие действия          |
|--------------------------------|---------------------------------------------|------------------------------|
| Заполните все поля!            | Не все поля заполнены при добавлении записи | Заполните все поля и повторите попытку  |
| Неверный логин или пароль!     | Логин или пароль неверные                   | Проверьте логин и пароль     |
| Сотрудник не достигает возраста 16 лет! | Дата рождения указывает на возраст меньше 16 | Укажите корректную дату рождения |
| Выберите запись!               | Не выбрана строка для редактирования        | Выберите строку в таблице    |
| Не удалось подключиться к БД   | Ошибка подключения к PostgreSQL             | Проверьте параметры подключения и сервер   |

## Контрольный пример
1. Запустите программу;
2. Войдите под ролью «Администратор» (логин: `admin`; пароль: `admin123`);
3. Перейдите в «Сотрудники», добавьте запись: 
   | Поле          | Текст для заполнения     |
   |---------------|--------------------------|
   | ФИО           | Иванов Руслан Дмитриевич |
   | Пол           | М                        |
   | Дата рождения | 1990-01-01               |
   | Должность     | Механик                  |
   | Почта         | ivanov@example.com       |
4. Убедитесь, что запись появилась в таблице.

## Лицензия
Проект распространяется под лицензией [GNU General Public License 3.0 (GPL-3.0)](LICENSE).
Для коммерческого использования свяжитесь с автором: <vikazlobova@yandex.ru>.